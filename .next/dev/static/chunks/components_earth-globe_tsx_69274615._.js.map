{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ali/Desktop/Leedshack2026/leedshack2026-prototype/components/earth-globe.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useEffect, useRef } from \"react\"\r\nimport * as THREE from \"three\"\r\nimport ThreeGlobe from \"three-globe\"\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\"\r\nimport type { Hotspot } from \"@/lib/types\"\r\nimport type { SatellitePosition } from \"@/lib/orbital\"\r\n\r\ninterface EarthGlobeProps {\r\n  launchSite?: { lat: number; lon: number; name?: string } | null\r\n  corridorPath?: { lat: number; lon: number }[]\r\n  corridorWidth?: number\r\n  hotspots?: Hotspot[] | null\r\n  showCorridor?: boolean\r\n  showHotspots?: boolean\r\n  showSatellites?: boolean\r\n  satellites?: SatellitePosition[]\r\n  compareCorridorPath?: { lat: number; lon: number }[] | null\r\n  onHotspotHover?: (h: Hotspot | null) => void\r\n}\r\n\r\nexport default function EarthGlobe({\r\n  launchSite,\r\n  hotspots = null,\r\n  satellites = [],\r\n}: EarthGlobeProps) {\r\n  const mountRef = useRef<HTMLDivElement | null>(null)\r\n  const globeRef = useRef<any>(null)\r\n  const animRef = useRef<number | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (!mountRef.current) return\r\n\r\n    const scene = new THREE.Scene()\r\n    const camera = new THREE.PerspectiveCamera(45, mountRef.current.clientWidth / mountRef.current.clientHeight, 0.1, 1000)\r\n    camera.position.z = 300\r\n\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true })\r\n    renderer.setSize(mountRef.current.clientWidth, mountRef.current.clientHeight)\r\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n    mountRef.current.innerHTML = \"\"\r\n    mountRef.current.appendChild(renderer.domElement)\r\n\r\n    // lights\r\n    scene.add(new THREE.AmbientLight(0xbbbbbb))\r\n    const dir = new THREE.DirectionalLight(0xffffff, 0.6)\r\n    dir.position.set(5, 3, 5)\r\n    scene.add(dir)\r\n\r\n    // three-globe\r\n    const globe = new ThreeGlobe()\r\n    globe.globeImageUrl('//unpkg.com/three-globe/example/img/earth-dark.jpg')\r\n    globe.showAtmosphere(true)\r\n    globe.atmosphereColor('#3fb0ff')\r\n    globe.atmosphereAltitude(0.25)\r\n\r\n    globe.pointsData([])\r\n    scene.add(globe)\r\n    globeRef.current = globe\r\n\r\n    // controls\r\n    const controls = new OrbitControls(camera, renderer.domElement)\r\n    controls.autoRotate = true\r\n    controls.autoRotateSpeed = 0.25\r\n    controls.enablePan = false\r\n\r\n    const handleResize = () => {\r\n      if (!mountRef.current) return\r\n      const w = mountRef.current.clientWidth\r\n      const h = mountRef.current.clientHeight\r\n      camera.aspect = w / h\r\n      camera.updateProjectionMatrix()\r\n      renderer.setSize(w, h)\r\n    }\r\n    window.addEventListener('resize', handleResize)\r\n\r\n    const animate = () => {\r\n      controls.update()\r\n      renderer.render(scene, camera)\r\n      animRef.current = requestAnimationFrame(animate)\r\n    }\r\n    animate()\r\n\r\n    return () => {\r\n      if (animRef.current) cancelAnimationFrame(animRef.current)\r\n      window.removeEventListener('resize', handleResize)\r\n      controls.dispose()\r\n      renderer.dispose()\r\n      scene.clear()\r\n      if (mountRef.current) mountRef.current.innerHTML = ''\r\n    }\r\n  }, [])\r\n\r\n  // update points when satellites or hotspots change\r\n  useEffect(() => {\r\n    const globe = globeRef.current as any\r\n    if (!globe) return\r\n\r\n    // prepare satellite points\r\n    const satPoints = (satellites ?? []).map((s) => ({\r\n      lat: s.lat,\r\n      lng: s.lon,\r\n      size: Math.max(0.2, Math.min(1.5, ((s.altitudeKm ?? 400) - 200) / 1000)),\r\n      color: s.type === 'debris' ? 'rgba(255,120,80,0.95)' : s.type === 'station' ? 'rgba(120,200,255,0.95)' : 'rgba(120,220,120,0.9)',\r\n      name: s.name,\r\n    }))\r\n\r\n    // prepare hotspots as points too (different color/size)\r\n    const hotPoints = (hotspots ?? []).map((h) => ({\r\n      lat: h.lat,\r\n      lng: h.lon,\r\n      size: Math.max(0.4, Math.min(2.0, (h.weight ?? 0.2) * 2)),\r\n      color: h.weight && h.weight > 0.7 ? 'rgba(255,60,60,0.95)' : 'rgba(255,200,60,0.9)',\r\n      name: h.label,\r\n    }))\r\n\r\n    // combine and set as pointsData\r\n    const points = [...satPoints, ...hotPoints]\r\n    globe\r\n      .pointsData(points)\r\n      .pointLat((d: any) => d.lat)\r\n      .pointLng((d: any) => d.lng)\r\n      .pointColor((d: any) => d.color)\r\n      .pointAltitude((d: any) => 0.002 + (d.size || 0.5) * 0.001)\r\n      .pointRadius((d: any) => (d.size || 0.5) * 0.45)\r\n\r\n  }, [satellites, hotspots])\r\n\r\n  return (\r\n    <div ref={mountRef} style={{ width: '100%', height: 600, maxHeight: '80vh', borderRadius: 8, overflow: 'hidden' }} />\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}