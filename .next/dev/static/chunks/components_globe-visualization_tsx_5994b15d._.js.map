{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ali/Desktop/Leedshack2026/leedshack2026-prototype/components/globe-visualization.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Suspense, useRef, useMemo, useState, useCallback } from \"react\"\r\nimport { Canvas, useFrame, type ThreeEvent, useLoader } from \"@react-three/fiber\"\r\nimport { OrbitControls, Html, Stars } from \"@react-three/drei\"\r\nimport * as THREE from \"three\"\r\nimport type { Hotspot } from \"@/lib/types\"\r\nimport type { SatellitePosition } from \"@/lib/orbital\"\r\n\r\n// Convert lat/lon to 3D position on sphere\r\nfunction latLonToVector3(lat: number, lon: number, radius: number): THREE.Vector3 {\r\n  const phi = (90 - lat) * (Math.PI / 180)\r\n  const theta = (lon + 180) * (Math.PI / 180)\r\n  const x = -(radius * Math.sin(phi) * Math.cos(theta))\r\n  const y = radius * Math.cos(phi)\r\n  const z = radius * Math.sin(phi) * Math.sin(theta)\r\n  return new THREE.Vector3(x, y, z)\r\n}\r\n\r\n// ✅ Realistic Earth textures via jsDelivr (Fix 1 for eduroam)\r\nfunction Earth() {\r\n  const earthRef = useRef<THREE.Mesh>(null)\r\n  const cloudsRef = useRef<THREE.Mesh>(null)\r\n  const glowRef = useRef<THREE.Mesh>(null)\r\n\r\n  const [dayMap, nightMap, normalMap, specMap, cloudsMap] = useLoader(THREE.TextureLoader, [\r\n    \"https://cdn.jsdelivr.net/gh/mrdoob/three.js@r160/examples/textures/planets/earth_atmos_2048.jpg\",\r\n    \"https://cdn.jsdelivr.net/gh/mrdoob/three.js@r160/examples/textures/planets/earth_lights_2048.png\",\r\n    \"https://cdn.jsdelivr.net/gh/mrdoob/three.js@r160/examples/textures/planets/earth_normal_2048.jpg\",\r\n    \"https://cdn.jsdelivr.net/gh/mrdoob/three.js@r160/examples/textures/planets/earth_specular_2048.jpg\",\r\n    \"https://cdn.jsdelivr.net/gh/mrdoob/three.js@r160/examples/textures/planets/earth_clouds_2048.png\",\r\n  ])\r\n\r\n  // ✅ Texture quality + color-space compat (prevents white-screen on older three)\r\n  useMemo(() => {\r\n    const setup = (t: THREE.Texture, isColor: boolean) => {\r\n      t.anisotropy = 8\r\n      t.generateMipmaps = true\r\n      t.minFilter = THREE.LinearMipmapLinearFilter\r\n      t.magFilter = THREE.LinearFilter\r\n\r\n      if (isColor) {\r\n        if (\"colorSpace\" in t) {\r\n          ;(t as any).colorSpace = (THREE as any).SRGBColorSpace\r\n        } else {\r\n          ;(t as any).encoding = (THREE as any).sRGBEncoding\r\n        }\r\n      }\r\n\r\n      t.needsUpdate = true\r\n    }\r\n\r\n    setup(dayMap, true)\r\n    setup(nightMap, true)\r\n    setup(cloudsMap, true)\r\n    setup(normalMap, false)\r\n    setup(specMap, false)\r\n  }, [dayMap, nightMap, normalMap, specMap, cloudsMap])\r\n\r\n  useFrame((state) => {\r\n    const t = state.clock.elapsedTime\r\n    if (earthRef.current) earthRef.current.rotation.y += 0.00025\r\n    if (cloudsRef.current) cloudsRef.current.rotation.y += 0.00035\r\n\r\n    if (glowRef.current) {\r\n      const mat = glowRef.current.material as THREE.MeshBasicMaterial\r\n      mat.opacity = 0.05 + Math.sin(t * 0.6) * 0.02\r\n    }\r\n  })\r\n\r\n  return (\r\n    <group>\r\n      {/* Earth */}\r\n      <mesh ref={earthRef}>\r\n        <sphereGeometry args={[1.99, 256, 256]} />\r\n        <meshPhongMaterial\r\n          map={dayMap}\r\n          normalMap={normalMap}\r\n          normalScale={new THREE.Vector2(0.6, 0.6)}\r\n          specularMap={specMap}\r\n          specular={new THREE.Color(\"#2a5aa3\")}\r\n          shininess={35}\r\n          // Night lights\r\n          emissiveMap={nightMap}\r\n          emissive={new THREE.Color(\"#ffffff\")}\r\n          emissiveIntensity={0.85}\r\n        />\r\n      </mesh>\r\n\r\n      {/* Clouds */}\r\n      <mesh ref={cloudsRef}>\r\n        <sphereGeometry args={[2.01, 128, 128]} />\r\n        <meshPhongMaterial map={cloudsMap} transparent opacity={0.55} depthWrite={false} side={THREE.DoubleSide} />\r\n      </mesh>\r\n\r\n      {/* Glow */}\r\n      <mesh ref={glowRef}>\r\n        <sphereGeometry args={[2.05, 128, 128]} />\r\n        <meshBasicMaterial color=\"#66ccff\" transparent opacity={0.05} />\r\n      </mesh>\r\n    </group>\r\n  )\r\n}\r\n\r\n// Atmosphere glow (slightly improved)\r\nfunction Atmosphere() {\r\n  return (\r\n    <mesh>\r\n      <sphereGeometry args={[2.08, 128, 128]} />\r\n      <meshBasicMaterial color=\"#58c4ff\" transparent opacity={0.045} side={THREE.BackSide} />\r\n    </mesh>\r\n  )\r\n}\r\n\r\n// Launch site marker\r\nfunction LaunchSiteMarker({\r\n  lat,\r\n  lon,\r\n  name,\r\n  isActive,\r\n}: {\r\n  lat: number\r\n  lon: number\r\n  name: string\r\n  isActive: boolean\r\n}) {\r\n  const position = useMemo(() => latLonToVector3(lat, lon, 2.02), [lat, lon])\r\n  const [hovered, setHovered] = useState(false)\r\n\r\n  return (\r\n    <group position={position}>\r\n      <mesh onPointerOver={() => setHovered(true)} onPointerOut={() => setHovered(false)}>\r\n        <sphereGeometry args={[isActive ? 0.04 : 0.025, 16, 16]} />\r\n        <meshBasicMaterial color={isActive ? \"#22d3ee\" : \"#94a3b8\"} transparent opacity={isActive ? 1 : 0.6} />\r\n      </mesh>\r\n      {isActive && (\r\n        <mesh>\r\n          <ringGeometry args={[0.06, 0.08, 32]} />\r\n          <meshBasicMaterial color=\"#22d3ee\" transparent opacity={0.5} side={THREE.DoubleSide} />\r\n        </mesh>\r\n      )}\r\n      {hovered && (\r\n        <Html distanceFactor={6} style={{ pointerEvents: \"none\" }}>\r\n          <div className=\"rounded-md bg-card/95 px-2 py-1 text-xs font-sans text-card-foreground shadow-lg border border-border whitespace-nowrap backdrop-blur-sm\">\r\n            {name}\r\n          </div>\r\n        </Html>\r\n      )}\r\n    </group>\r\n  )\r\n}\r\n\r\n// Corridor path line\r\nfunction CorridorPath({\r\n  path,\r\n  visible,\r\n  color = \"#22d3ee\",\r\n}: {\r\n  path: { lat: number; lon: number }[]\r\n  visible: boolean\r\n  color?: string\r\n}) {\r\n  const points = useMemo(() => path.map((p) => latLonToVector3(p.lat, p.lon, 2.03)), [path])\r\n  const geometry = useMemo(() => new THREE.BufferGeometry().setFromPoints(points), [points])\r\n\r\n  if (!visible || points.length === 0) return null\r\n\r\n  return (\r\n    <line geometry={geometry}>\r\n      <lineBasicMaterial color={color} linewidth={2} transparent opacity={0.9} />\r\n    </line>\r\n  )\r\n}\r\n\r\n// Corridor buffer - rising cone from launch site\r\nfunction CorridorBuffer({\r\n  path,\r\n  width,\r\n  visible,\r\n  color = \"#22d3ee\",\r\n}: {\r\n  path: { lat: number; lon: number }[]\r\n  width: number\r\n  visible: boolean\r\n  color?: string\r\n}) {\r\n  const geometry = useMemo(() => {\r\n    if (path.length < 2) return null\r\n\r\n    const positions: number[] = []\r\n    const indices: number[] = []\r\n\r\n    const launchPoint = latLonToVector3(path[0].lat, path[0].lon, 2.0)\r\n    const numRadialSegments = 12\r\n    const verticesPerRing = numRadialSegments\r\n\r\n    const startRadius = Math.max(0.05, (width / 100) * 0.12)\r\n\r\n    for (let i = 0; i < path.length; i++) {\r\n      const point = path[i]\r\n      const fraction = i / (path.length - 1)\r\n\r\n      const centerPos = latLonToVector3(point.lat, point.lon, 2.0)\r\n      const direction = centerPos.clone().sub(launchPoint).normalize()\r\n\r\n      const altitudeOffset = fraction * 0.15\r\n      const liftedPos = centerPos.clone().add(direction.multiplyScalar(altitudeOffset))\r\n\r\n      const currentRadius = startRadius * (1 - fraction * 0.7)\r\n\r\n      for (let j = 0; j < numRadialSegments; j++) {\r\n        const angle = (j / numRadialSegments) * Math.PI * 2\r\n        const perpX = Math.cos(angle)\r\n        const perpY = Math.sin(angle)\r\n\r\n        const perp = new THREE.Vector3(perpX, perpY, 0).normalize()\r\n        const vertex = liftedPos.clone().add(perp.multiplyScalar(currentRadius))\r\n\r\n        positions.push(vertex.x, vertex.y, vertex.z)\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < path.length - 1; i++) {\r\n      const baseA = i * verticesPerRing\r\n      const baseB = (i + 1) * verticesPerRing\r\n\r\n      for (let j = 0; j < verticesPerRing; j++) {\r\n        const nextJ = (j + 1) % verticesPerRing\r\n        indices.push(baseA + j, baseB + j, baseA + nextJ)\r\n        indices.push(baseA + nextJ, baseB + j, baseB + nextJ)\r\n      }\r\n    }\r\n\r\n    const geom = new THREE.BufferGeometry()\r\n    geom.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(positions), 3))\r\n    geom.setIndex(new THREE.BufferAttribute(new Uint32Array(indices), 1))\r\n    geom.computeVertexNormals()\r\n    return geom\r\n  }, [path, width])\r\n\r\n  if (!visible || !geometry) return null\r\n\r\n  return (\r\n    <mesh geometry={geometry}>\r\n      <meshBasicMaterial color={color} transparent opacity={0.3} side={THREE.DoubleSide} depthWrite={false} />\r\n    </mesh>\r\n  )\r\n}\r\n\r\n// Hotspot markers\r\nfunction HotspotMarker({\r\n  hotspot,\r\n  visible,\r\n  onHover,\r\n}: {\r\n  hotspot: Hotspot\r\n  visible: boolean\r\n  onHover: (h: Hotspot | null) => void\r\n}) {\r\n  const position = useMemo(() => latLonToVector3(hotspot.lat, hotspot.lon, 2.05), [hotspot.lat, hotspot.lon])\r\n  const [hovered, setHovered] = useState(false)\r\n  const pulseRef = useRef<THREE.Mesh>(null)\r\n\r\n  useFrame((state) => {\r\n    if (pulseRef.current) {\r\n      const scale = 1 + Math.sin(state.clock.elapsedTime * 3) * 0.3\r\n      pulseRef.current.scale.setScalar(scale)\r\n    }\r\n  })\r\n\r\n  const handlePointerOver = useCallback(\r\n    (e: ThreeEvent<PointerEvent>) => {\r\n      e.stopPropagation()\r\n      setHovered(true)\r\n      onHover(hotspot)\r\n    },\r\n    [hotspot, onHover]\r\n  )\r\n\r\n  const handlePointerOut = useCallback(() => {\r\n    setHovered(false)\r\n    onHover(null)\r\n  }, [onHover])\r\n\r\n  if (!visible) return null\r\n\r\n  const size = 0.02 + hotspot.weight * 0.03\r\n  const riskColor = hotspot.weight > 0.7 ? \"#ef4444\" : hotspot.weight > 0.4 ? \"#f59e0b\" : \"#22c55e\"\r\n\r\n  return (\r\n    <group position={position}>\r\n      <mesh onPointerOver={handlePointerOver} onPointerOut={handlePointerOut}>\r\n        <sphereGeometry args={[size, 16, 16]} />\r\n        <meshBasicMaterial color={riskColor} />\r\n      </mesh>\r\n      <mesh ref={pulseRef}>\r\n        <sphereGeometry args={[size * 1.5, 16, 16]} />\r\n        <meshBasicMaterial color={riskColor} transparent opacity={0.3} />\r\n      </mesh>\r\n      {hovered && (\r\n        <Html distanceFactor={6} style={{ pointerEvents: \"none\" }}>\r\n          <div className=\"rounded-md bg-card/95 px-3 py-2 text-xs font-sans text-card-foreground shadow-lg border border-border whitespace-nowrap backdrop-blur-sm\">\r\n            <div className=\"font-medium\">{hotspot.label}</div>\r\n            <div className=\"text-muted-foreground\">\r\n              Alt: {hotspot.altitudeBand} | Risk: {(hotspot.weight * 100).toFixed(0)}%\r\n            </div>\r\n          </div>\r\n        </Html>\r\n      )}\r\n    </group>\r\n  )\r\n}\r\n\r\n// Satellite/debris instanced point cloud\r\nconst SAT_COLORS: Record<string, string> = {\r\n  active: \"#3b82f6\",\r\n  debris: \"#ef4444\",\r\n  station: \"#ffffff\",\r\n  recent: \"#22c55e\",\r\n}\r\n\r\nfunction SatelliteLayer({ satellites, visible }: { satellites: SatellitePosition[]; visible: boolean }) {\r\n  const meshRef = useRef<THREE.InstancedMesh>(null)\r\n  const [hoveredIdx, setHoveredIdx] = useState<number | null>(null)\r\n\r\n  const { matrices, colors, count } = useMemo(() => {\r\n    if (!visible || !satellites || satellites.length === 0) {\r\n      return { matrices: new Float32Array(0), colors: new Float32Array(0), count: 0 }\r\n    }\r\n\r\n    const cnt = satellites.length\r\n    const mat = new Float32Array(cnt * 16)\r\n    const col = new Float32Array(cnt * 3)\r\n    const dummy = new THREE.Matrix4()\r\n    const color = new THREE.Color()\r\n\r\n    for (let i = 0; i < cnt; i++) {\r\n      const sat = satellites[i]\r\n      const normAlt = Math.min(sat.altitudeKm / 2000, 1)\r\n      const radius = 2.08 + normAlt * 0.3\r\n      const pos = latLonToVector3(sat.lat, sat.lon, radius)\r\n\r\n      const size = sat.type === \"station\" ? 0.025 : sat.type === \"debris\" ? 0.012 : 0.015\r\n      dummy.makeScale(size, size, size)\r\n      dummy.setPosition(pos)\r\n      dummy.toArray(mat, i * 16)\r\n\r\n      color.set(SAT_COLORS[sat.type] || \"#3b82f6\")\r\n      col[i * 3] = color.r\r\n      col[i * 3 + 1] = color.g\r\n      col[i * 3 + 2] = color.b\r\n    }\r\n    return { matrices: mat, colors: col, count: cnt }\r\n  }, [satellites, visible])\r\n\r\n  useFrame(() => {\r\n    if (!meshRef.current || count === 0) return\r\n    const dummy = new THREE.Matrix4()\r\n    for (let i = 0; i < count; i++) {\r\n      dummy.fromArray(matrices, i * 16)\r\n      meshRef.current.setMatrixAt(i, dummy)\r\n\r\n      const color = new THREE.Color(colors[i * 3], colors[i * 3 + 1], colors[i * 3 + 2])\r\n      meshRef.current.setColorAt(i, color)\r\n    }\r\n    meshRef.current.instanceMatrix.needsUpdate = true\r\n    if (meshRef.current.instanceColor) meshRef.current.instanceColor.needsUpdate = true\r\n  })\r\n\r\n  const satLength = satellites?.length ?? 0\r\n\r\n  const handlePointerMove = useCallback(\r\n    (e: ThreeEvent<PointerEvent>) => {\r\n      e.stopPropagation()\r\n      if (e.instanceId !== undefined && e.instanceId < satLength) setHoveredIdx(e.instanceId)\r\n    },\r\n    [satLength]\r\n  )\r\n\r\n  const handlePointerOut = useCallback(() => setHoveredIdx(null), [])\r\n\r\n  if (!visible || count === 0) return null\r\n\r\n  const hoveredSat = hoveredIdx !== null ? satellites[hoveredIdx] : null\r\n\r\n  return (\r\n    <group>\r\n      <instancedMesh ref={meshRef} args={[undefined, undefined, count]} onPointerMove={handlePointerMove} onPointerOut={handlePointerOut}>\r\n        <sphereGeometry args={[1, 6, 6]} />\r\n        <meshBasicMaterial toneMapped={false} />\r\n      </instancedMesh>\r\n      {hoveredSat && (\r\n        <group position={latLonToVector3(hoveredSat.lat, hoveredSat.lon, 2.1 + Math.min(hoveredSat.altitudeKm / 2000, 1) * 0.3)}>\r\n          <Html distanceFactor={6} style={{ pointerEvents: \"none\" }}>\r\n            <div className=\"rounded-md bg-card/95 px-3 py-2 text-xs font-sans text-card-foreground shadow-lg border border-border whitespace-nowrap backdrop-blur-sm\">\r\n              <div className=\"font-medium\">{hoveredSat.name}</div>\r\n              <div className=\"text-muted-foreground flex gap-2\">\r\n                <span>NORAD {hoveredSat.noradId}</span>\r\n                <span>Alt: {Math.round(hoveredSat.altitudeKm)} km</span>\r\n              </div>\r\n              <div className=\"text-muted-foreground capitalize\">{hoveredSat.type}</div>\r\n            </div>\r\n          </Html>\r\n        </group>\r\n      )}\r\n    </group>\r\n  )\r\n}\r\n\r\n// Main scene content\r\nfunction GlobeScene({\r\n  launchSite,\r\n  corridorPath,\r\n  corridorWidth,\r\n  hotspots,\r\n  showCorridor,\r\n  showHotspots,\r\n  showSatellites,\r\n  satellites,\r\n  compareCorridorPath,\r\n  onHotspotHover,\r\n}: {\r\n  launchSite: { lat: number; lon: number; name: string } | null\r\n  corridorPath: { lat: number; lon: number }[]\r\n  corridorWidth: number\r\n  hotspots: Hotspot[]\r\n  showCorridor: boolean\r\n  showHotspots: boolean\r\n  showSatellites: boolean\r\n  satellites: SatellitePosition[]\r\n  compareCorridorPath?: { lat: number; lon: number }[]\r\n  onHotspotHover: (h: Hotspot | null) => void\r\n}) {\r\n  return (\r\n    <>\r\n      <ambientLight intensity={0.25} />\r\n      <directionalLight position={[10, 3, 10]} intensity={1.6} />\r\n      <Stars radius={100} depth={50} count={2000} factor={4} saturation={0} fade speed={1} />\r\n\r\n      <Earth />\r\n      <Atmosphere />\r\n\r\n      <SatelliteLayer satellites={satellites} visible={showSatellites} />\r\n\r\n      {launchSite && <LaunchSiteMarker lat={launchSite.lat} lon={launchSite.lon} name={launchSite.name} isActive />}\r\n\r\n      <CorridorPath path={corridorPath} visible={showCorridor} />\r\n      <CorridorBuffer path={corridorPath} width={corridorWidth} visible={showCorridor} />\r\n\r\n      {compareCorridorPath && compareCorridorPath.length > 0 && (\r\n        <>\r\n          <CorridorPath path={compareCorridorPath} visible={showCorridor} color=\"#f59e0b\" />\r\n          <CorridorBuffer path={compareCorridorPath} width={corridorWidth} visible={showCorridor} color=\"#f59e0b\" />\r\n        </>\r\n      )}\r\n\r\n      {hotspots.map((h, i) => (\r\n        <HotspotMarker key={`hotspot-${i}`} hotspot={h} visible={showHotspots} onHover={onHotspotHover} />\r\n      ))}\r\n\r\n      <OrbitControls enablePan={false} minDistance={3} maxDistance={8} enableDamping dampingFactor={0.05} />\r\n    </>\r\n  )\r\n}\r\n\r\ninterface GlobeVisualizationProps {\r\n  launchSite: { lat: number; lon: number; name: string } | null\r\n  corridorPath: { lat: number; lon: number }[]\r\n  corridorWidth: number\r\n  hotspots: Hotspot[]\r\n  showCorridor: boolean\r\n  showHotspots: boolean\r\n  showSatellites: boolean\r\n  satellites: SatellitePosition[]\r\n  compareCorridorPath?: { lat: number; lon: number }[]\r\n}\r\n\r\nexport default function GlobeVisualization({\r\n  launchSite,\r\n  corridorPath,\r\n  corridorWidth,\r\n  hotspots,\r\n  showCorridor,\r\n  showHotspots,\r\n  showSatellites,\r\n  satellites,\r\n  compareCorridorPath,\r\n}: GlobeVisualizationProps) {\r\n  const [, setHoveredHotspot] = useState<Hotspot | null>(null)\r\n\r\n  return (\r\n    <div className=\"w-full h-full relative\">\r\n      <Canvas camera={{ position: [0, 0, 5], fov: 45 }} gl={{ antialias: true, alpha: true }} style={{ background: \"transparent\" }}>\r\n        <Suspense fallback={null}>\r\n          <GlobeScene\r\n            launchSite={launchSite}\r\n            corridorPath={corridorPath}\r\n            corridorWidth={corridorWidth}\r\n            hotspots={hotspots}\r\n            showCorridor={showCorridor}\r\n            showHotspots={showHotspots}\r\n            showSatellites={showSatellites}\r\n            satellites={satellites}\r\n            compareCorridorPath={compareCorridorPath}\r\n            onHotspotHover={setHoveredHotspot}\r\n          />\r\n        </Suspense>\r\n      </Canvas>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}