{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ali/Desktop/Leedshack2026/leedshack2026-prototype/lib/launch-data.ts"],"sourcesContent":["import type { LaunchSite } from \"./types\"\r\n\r\nexport const LAUNCH_SITES: LaunchSite[] = [\r\n  { name: \"Cape Canaveral\", lat: 28.3922, lon: -80.6077, code: \"CC\" },\r\n  { name: \"Vandenberg\", lat: 34.7420, lon: -120.5724, code: \"VB\" },\r\n  { name: \"Baikonur\", lat: 45.9650, lon: 63.3050, code: \"BK\" },\r\n  { name: \"Kourou\", lat: 5.2360, lon: -52.7686, code: \"KR\" },\r\n]\r\n\r\nexport const INCLINATION_PRESETS = [\r\n  { label: \"Equatorial\", value: 0 },\r\n  { label: \"Cape Canaveral Min\", value: 28.5 },\r\n  { label: \"ISS\", value: 51.6 },\r\n  { label: \"Starlink\", value: 53 },\r\n  { label: \"Sun-synchronous\", value: 97.4 },\r\n]\r\n\r\nexport const ALTITUDE_RANGE = { min: 200, max: 3000 }\r\nexport const CORRIDOR_WIDTH_RANGE = { min: 5, max: 100 }\r\n\r\n// Simulated debris density by altitude band (objects per 50km band)\r\n// Based on approximate real-world distributions from ESA/NASA data\r\n// Peaks around 750-850km (weather/Earth observation sats) and 500-600km (Starlink region)\r\nexport const DEBRIS_DENSITY_BY_BAND: { bandStart: number; bandEnd: number; density: number }[] = [\r\n  { bandStart: 200, bandEnd: 250, density: 0.05 },\r\n  { bandStart: 250, bandEnd: 300, density: 0.08 },\r\n  { bandStart: 300, bandEnd: 350, density: 0.12 },\r\n  { bandStart: 350, bandEnd: 400, density: 0.18 },\r\n  { bandStart: 400, bandEnd: 450, density: 0.25 },\r\n  { bandStart: 450, bandEnd: 500, density: 0.35 },\r\n  { bandStart: 500, bandEnd: 550, density: 0.55 },\r\n  { bandStart: 550, bandEnd: 600, density: 0.72 },\r\n  { bandStart: 600, bandEnd: 650, density: 0.68 },\r\n  { bandStart: 650, bandEnd: 700, density: 0.58 },\r\n  { bandStart: 700, bandEnd: 750, density: 0.75 },\r\n  { bandStart: 750, bandEnd: 800, density: 0.92 },\r\n  { bandStart: 800, bandEnd: 850, density: 0.98 },\r\n  { bandStart: 850, bandEnd: 900, density: 0.85 },\r\n  { bandStart: 900, bandEnd: 950, density: 0.62 },\r\n  { bandStart: 950, bandEnd: 1000, density: 0.48 },\r\n  { bandStart: 1000, bandEnd: 1050, density: 0.35 },\r\n  { bandStart: 1050, bandEnd: 1100, density: 0.28 },\r\n  { bandStart: 1100, bandEnd: 1150, density: 0.20 },\r\n  { bandStart: 1150, bandEnd: 1200, density: 0.15 },\r\n]\r\n\r\n// Inclination bands with higher debris density (degrees)\r\nexport const HIGH_DENSITY_INCLINATIONS = [\r\n  { center: 51.6, width: 5, factor: 1.3, label: \"ISS corridor\" },\r\n  { center: 53, width: 3, factor: 1.2, label: \"Starlink band\" },\r\n  { center: 97.4, width: 4, factor: 1.4, label: \"Sun-synch corridor\" },\r\n  { center: 82, width: 6, factor: 1.1, label: \"Polar orbit zone\" },\r\n]\r\n\r\n// Time-of-day risk modifiers (simplified solar activity proxy)\r\nexport const TIME_RISK_MODIFIERS: Record<string, number> = {\r\n  \"0\": 0.95, \"1\": 0.94, \"2\": 0.93, \"3\": 0.92,\r\n  \"4\": 0.93, \"5\": 0.95, \"6\": 0.98, \"7\": 1.0,\r\n  \"8\": 1.02, \"9\": 1.04, \"10\": 1.05, \"11\": 1.06,\r\n  \"12\": 1.06, \"13\": 1.05, \"14\": 1.04, \"15\": 1.03,\r\n  \"16\": 1.02, \"17\": 1.01, \"18\": 1.0, \"19\": 0.99,\r\n  \"20\": 0.98, \"21\": 0.97, \"22\": 0.96, \"23\": 0.95,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEO,MAAM,eAA6B;IACxC;QAAE,MAAM;QAAkB,KAAK;QAAS,KAAK,CAAC;QAAS,MAAM;IAAK;IAClE;QAAE,MAAM;QAAc,KAAK;QAAS,KAAK,CAAC;QAAU,MAAM;IAAK;IAC/D;QAAE,MAAM;QAAY,KAAK;QAAS,KAAK;QAAS,MAAM;IAAK;IAC3D;QAAE,MAAM;QAAU,KAAK;QAAQ,KAAK,CAAC;QAAS,MAAM;IAAK;CAC1D;AAEM,MAAM,sBAAsB;IACjC;QAAE,OAAO;QAAc,OAAO;IAAE;IAChC;QAAE,OAAO;QAAsB,OAAO;IAAK;IAC3C;QAAE,OAAO;QAAO,OAAO;IAAK;IAC5B;QAAE,OAAO;QAAY,OAAO;IAAG;IAC/B;QAAE,OAAO;QAAmB,OAAO;IAAK;CACzC;AAEM,MAAM,iBAAiB;IAAE,KAAK;IAAK,KAAK;AAAK;AAC7C,MAAM,uBAAuB;IAAE,KAAK;IAAG,KAAK;AAAI;AAKhD,MAAM,yBAAoF;IAC/F;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAK,SAAS;IAAK;IAC9C;QAAE,WAAW;QAAK,SAAS;QAAM,SAAS;IAAK;IAC/C;QAAE,WAAW;QAAM,SAAS;QAAM,SAAS;IAAK;IAChD;QAAE,WAAW;QAAM,SAAS;QAAM,SAAS;IAAK;IAChD;QAAE,WAAW;QAAM,SAAS;QAAM,SAAS;IAAK;IAChD;QAAE,WAAW;QAAM,SAAS;QAAM,SAAS;IAAK;CACjD;AAGM,MAAM,4BAA4B;IACvC;QAAE,QAAQ;QAAM,OAAO;QAAG,QAAQ;QAAK,OAAO;IAAe;IAC7D;QAAE,QAAQ;QAAI,OAAO;QAAG,QAAQ;QAAK,OAAO;IAAgB;IAC5D;QAAE,QAAQ;QAAM,OAAO;QAAG,QAAQ;QAAK,OAAO;IAAqB;IACnE;QAAE,QAAQ;QAAI,OAAO;QAAG,QAAQ;QAAK,OAAO;IAAmB;CAChE;AAGM,MAAM,sBAA8C;IACzD,KAAK;IAAM,KAAK;IAAM,KAAK;IAAM,KAAK;IACtC,KAAK;IAAM,KAAK;IAAM,KAAK;IAAM,KAAK;IACtC,KAAK;IAAM,KAAK;IAAM,MAAM;IAAM,MAAM;IACxC,MAAM;IAAM,MAAM;IAAM,MAAM;IAAM,MAAM;IAC1C,MAAM;IAAM,MAAM;IAAM,MAAM;IAAK,MAAM;IACzC,MAAM;IAAM,MAAM;IAAM,MAAM;IAAM,MAAM;AAC5C"}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ali/Desktop/Leedshack2026/leedshack2026-prototype/lib/risk-engine.ts"],"sourcesContent":["import type {\r\n  LaunchProfile,\r\n  RiskAssessment,\r\n  AltitudeBand,\r\n  Hotspot,\r\n  RiskDriver,\r\n  Recommendation,\r\n  RiskLabel,\r\n} from \"./types\"\r\nimport {\r\n  DEBRIS_DENSITY_BY_BAND,\r\n  HIGH_DENSITY_INCLINATIONS,\r\n  TIME_RISK_MODIFIERS,\r\n} from \"./launch-data\"\r\n\r\nfunction toRad(deg: number) {\r\n  return (deg * Math.PI) / 180\r\n}\r\n\r\nfunction toDeg(rad: number) {\r\n  return (rad * 180) / Math.PI\r\n}\r\n\r\n// Generate simplified corridor path (great circle arc from launch site)\r\nfunction generateCorridorPath(\r\n  lat: number,\r\n  lon: number,\r\n  inclination: number,\r\n  targetAlt: number\r\n): { lat: number; lon: number }[] {\r\n  const points: { lat: number; lon: number }[] = []\r\n  const numPoints = 60\r\n  const azimuth = toRad(90 - inclination) // simplified: launch azimuth from inclination\r\n\r\n  for (let i = 0; i <= numPoints; i++) {\r\n    const fraction = i / numPoints\r\n    const distance = fraction * (targetAlt / 100) // arc length proportional to altitude\r\n    const angularDistance = toRad(distance)\r\n    const lat1 = toRad(lat)\r\n    const lon1 = toRad(lon)\r\n\r\n    const lat2 = Math.asin(\r\n      Math.sin(lat1) * Math.cos(angularDistance) +\r\n        Math.cos(lat1) * Math.sin(angularDistance) * Math.cos(azimuth)\r\n    )\r\n    const lon2 =\r\n      lon1 +\r\n      Math.atan2(\r\n        Math.sin(azimuth) * Math.sin(angularDistance) * Math.cos(lat1),\r\n        Math.cos(angularDistance) - Math.sin(lat1) * Math.sin(lat2)\r\n      )\r\n\r\n    points.push({ lat: toDeg(lat2), lon: toDeg(lon2) })\r\n  }\r\n\r\n  return points\r\n}\r\n\r\n// Calculate corridor width factor (wider corridor = more exposure)\r\nfunction corridorWidthFactor(widthKm: number): number {\r\n  return 0.5 + (widthKm / 100) * 0.5 // normalized 0.5-1.0\r\n}\r\n\r\n// Calculate inclination match factor\r\nfunction inclinationFactor(inclination: number): number {\r\n  let factor = 1.0\r\n  for (const band of HIGH_DENSITY_INCLINATIONS) {\r\n    const diff = Math.abs(inclination - band.center)\r\n    if (diff <= band.width) {\r\n      const closeness = 1 - diff / band.width\r\n      factor = Math.max(factor, 1 + (band.factor - 1) * closeness)\r\n    }\r\n  }\r\n  return factor\r\n}\r\n\r\n// Get time-of-day modifier\r\nfunction timeFactor(datetime: string): number {\r\n  try {\r\n    const date = new Date(datetime)\r\n    const hour = date.getUTCHours().toString()\r\n    return TIME_RISK_MODIFIERS[hour] ?? 1.0\r\n  } catch {\r\n    return 1.0\r\n  }\r\n}\r\n\r\n// Core risk assessment\r\nexport function calculateRisk(profile: LaunchProfile): RiskAssessment {\r\n  const { launchSite, targetAltitudeKm, inclinationDeg, corridorWidthKm, launchDatetimeUtc } =\r\n    profile\r\n\r\n  // Calculate per-band risk\r\n  const cwFactor = corridorWidthFactor(corridorWidthKm)\r\n  const incFactor = inclinationFactor(inclinationDeg)\r\n  const tFactor = timeFactor(launchDatetimeUtc)\r\n\r\n  // The launch traverses from 0 to targetAltitude, so we consider all bands up to target\r\n  const relevantBands = DEBRIS_DENSITY_BY_BAND.filter((b) => b.bandStart < targetAltitudeKm)\r\n\r\n  const riskByAltitude: AltitudeBand[] = relevantBands.map((band) => {\r\n    // Higher risk for bands closer to target altitude (more time spent there)\r\n    const altProximity =\r\n      1 - Math.abs(targetAltitudeKm - (band.bandStart + band.bandEnd) / 2) / targetAltitudeKm\r\n    const proximityWeight = 0.5 + altProximity * 0.5\r\n\r\n    const rawRisk = band.density * cwFactor * incFactor * tFactor * proximityWeight\r\n    return {\r\n      bandStart: band.bandStart,\r\n      bandEnd: band.bandEnd,\r\n      risk: Math.min(rawRisk, 1),\r\n    }\r\n  })\r\n\r\n  // Overall risk: weighted average of band risks\r\n  const totalRisk =\r\n    riskByAltitude.reduce((sum, b) => sum + b.risk, 0) / Math.max(riskByAltitude.length, 1)\r\n  const overallRisk = Math.min(Math.max(totalRisk, 0), 1)\r\n\r\n  // Risk label\r\n  let riskLabel: RiskLabel = \"LOW\"\r\n  if (overallRisk >= 0.6) riskLabel = \"HIGH\"\r\n  else if (overallRisk >= 0.3) riskLabel = \"MEDIUM\"\r\n\r\n  // Top risk drivers\r\n  const drivers: RiskDriver[] = []\r\n\r\n  // Find the peak density band\r\n  const peakBand = [...riskByAltitude].sort((a, b) => b.risk - a.risk)[0]\r\n  if (peakBand) {\r\n    drivers.push({\r\n      description: `High density in ${peakBand.bandStart}-${peakBand.bandEnd} km band`,\r\n      contribution: peakBand.risk,\r\n    })\r\n  }\r\n\r\n  // Check inclination factor\r\n  const matchingIncBand = HIGH_DENSITY_INCLINATIONS.find(\r\n    (b) => Math.abs(inclinationDeg - b.center) <= b.width\r\n  )\r\n  if (matchingIncBand) {\r\n    drivers.push({\r\n      description: `Inclination matches ${matchingIncBand.label} (${matchingIncBand.center} deg)`,\r\n      contribution: (incFactor - 1) * 0.5,\r\n    })\r\n  }\r\n\r\n  if (corridorWidthKm > 50) {\r\n    drivers.push({\r\n      description: `Wide corridor (${corridorWidthKm} km) increases exposure area`,\r\n      contribution: cwFactor * 0.3,\r\n    })\r\n  }\r\n\r\n  if (targetAltitudeKm >= 700 && targetAltitudeKm <= 900) {\r\n    drivers.push({\r\n      description: `Target altitude ${targetAltitudeKm} km is in the high-density debris shell`,\r\n      contribution: 0.4,\r\n    })\r\n  }\r\n\r\n  // Always show at least the altitude band driver, then pad with general ones\r\n  if (drivers.length < 3) {\r\n    drivers.push({\r\n      description: `Traverses ${relevantBands.length} altitude bands (200-${targetAltitudeKm} km)`,\r\n      contribution: relevantBands.length * 0.02,\r\n    })\r\n  }\r\n\r\n  // Top 3 drivers\r\n  const topDrivers = drivers.sort((a, b) => b.contribution - a.contribution).slice(0, 3)\r\n\r\n  // Hotspots (top 5 risk bands mapped to geographic points along corridor)\r\n  const corridorPath = generateCorridorPath(\r\n    launchSite.lat,\r\n    launchSite.lon,\r\n    inclinationDeg,\r\n    targetAltitudeKm\r\n  )\r\n\r\n  const sortedBands = [...riskByAltitude].sort((a, b) => b.risk - a.risk)\r\n  const hotspots: Hotspot[] = sortedBands.slice(0, 5).map((band, i) => {\r\n    const pathIndex = Math.min(\r\n      Math.floor((band.bandStart / targetAltitudeKm) * corridorPath.length),\r\n      corridorPath.length - 1\r\n    )\r\n    const point = corridorPath[pathIndex]\r\n    return {\r\n      lat: point.lat + (Math.random() - 0.5) * 2,\r\n      lon: point.lon + (Math.random() - 0.5) * 2,\r\n      weight: band.risk,\r\n      label: `Debris cluster at ${band.bandStart}-${band.bandEnd} km`,\r\n      altitudeBand: `${band.bandStart}-${band.bandEnd} km`,\r\n    }\r\n  })\r\n\r\n  // Recommendations\r\n  const recommendations: Recommendation[] = []\r\n\r\n  // Altitude tweak\r\n  const lowerAlt = targetAltitudeKm - 30\r\n  if (lowerAlt >= 200) {\r\n    const lowerBands = DEBRIS_DENSITY_BY_BAND.filter((b) => b.bandStart < lowerAlt)\r\n    const lowerDensity = lowerBands.reduce((s, b) => s + b.density, 0) / lowerBands.length\r\n    const currentDensity =\r\n      relevantBands.reduce((s, b) => s + b.density, 0) / relevantBands.length\r\n    const delta = ((currentDensity - lowerDensity) / currentDensity) * 100\r\n    if (delta > 2) {\r\n      recommendations.push({\r\n        action: `Target ${lowerAlt} km instead of ${targetAltitudeKm} km`,\r\n        benefit: `${delta.toFixed(0)}% less debris exposure`,\r\n        delta: -Math.round(delta),\r\n      })\r\n    }\r\n  }\r\n\r\n  // Corridor width tweak\r\n  if (corridorWidthKm > 20) {\r\n    const narrowerWidth = Math.max(corridorWidthKm - 20, 5)\r\n    const narrowerFactor = corridorWidthFactor(narrowerWidth)\r\n    const delta = ((cwFactor - narrowerFactor) / cwFactor) * 100\r\n    recommendations.push({\r\n      action: `Reduce corridor to ${narrowerWidth} km`,\r\n      benefit: `${delta.toFixed(0)}% smaller exposure footprint`,\r\n      delta: -Math.round(delta),\r\n    })\r\n  }\r\n\r\n  // Time shift recommendation\r\n  const currentHour = new Date(launchDatetimeUtc).getUTCHours()\r\n  const bestHour = Object.entries(TIME_RISK_MODIFIERS).sort(\r\n    ([, a], [, b]) => a - b\r\n  )[0]\r\n  if (bestHour && parseInt(bestHour[0]) !== currentHour) {\r\n    const hourDiff = parseInt(bestHour[0]) - currentHour\r\n    const sign = hourDiff > 0 ? \"+\" : \"\"\r\n    const delta = ((tFactor - bestHour[1]) / tFactor) * 100\r\n    if (delta > 1) {\r\n      recommendations.push({\r\n        action: `Shift launch time ${sign}${hourDiff}h UTC`,\r\n        benefit: `${delta.toFixed(0)}% lower solar activity risk`,\r\n        delta: -Math.round(delta),\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    overallRisk: Math.round(overallRisk * 1000) / 1000,\r\n    riskLabel,\r\n    topDrivers,\r\n    riskByAltitude,\r\n    hotspots,\r\n    recommendations: recommendations.slice(0, 3),\r\n    corridorPath,\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ali/Desktop/Leedshack2026/leedshack2026-prototype/app/api/compare/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { calculateRisk } from \"@/lib/risk-engine\"\r\nimport type { LaunchProfile, CompareResult } from \"@/lib/types\"\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const body = (await request.json()) as {\r\n      scenarioA: LaunchProfile\r\n      scenarioB: LaunchProfile\r\n    }\r\n\r\n    if (!body.scenarioA || !body.scenarioB) {\r\n      return NextResponse.json({ error: \"Both scenarios are required\" }, { status: 400 })\r\n    }\r\n\r\n    const resultA = calculateRisk(body.scenarioA)\r\n    const resultB = calculateRisk(body.scenarioB)\r\n\r\n    const deltaRisk = resultB.overallRisk - resultA.overallRisk\r\n    const deltaPercent =\r\n      resultA.overallRisk > 0\r\n        ? Math.round((deltaRisk / resultA.overallRisk) * 100)\r\n        : 0\r\n\r\n    // Generate comparison reasons\r\n    const reasons: string[] = []\r\n\r\n    if (body.scenarioA.targetAltitudeKm !== body.scenarioB.targetAltitudeKm) {\r\n      const diff = body.scenarioB.targetAltitudeKm - body.scenarioA.targetAltitudeKm\r\n      reasons.push(\r\n        `Altitude ${diff > 0 ? \"increase\" : \"decrease\"} of ${Math.abs(diff)} km ${diff > 0 ? \"raises\" : \"lowers\"} debris exposure`\r\n      )\r\n    }\r\n\r\n    if (body.scenarioA.inclinationDeg !== body.scenarioB.inclinationDeg) {\r\n      reasons.push(\r\n        `Inclination change from ${body.scenarioA.inclinationDeg} to ${body.scenarioB.inclinationDeg} deg affects orbital crossing patterns`\r\n      )\r\n    }\r\n\r\n    if (body.scenarioA.corridorWidthKm !== body.scenarioB.corridorWidthKm) {\r\n      const diff = body.scenarioB.corridorWidthKm - body.scenarioA.corridorWidthKm\r\n      reasons.push(\r\n        `Corridor width ${diff > 0 ? \"increase\" : \"decrease\"} of ${Math.abs(diff)} km ${diff > 0 ? \"expands\" : \"reduces\"} exposure zone`\r\n      )\r\n    }\r\n\r\n    if (body.scenarioA.launchSite.code !== body.scenarioB.launchSite.code) {\r\n      reasons.push(\r\n        `Different launch site changes the ground track and debris intersection geometry`\r\n      )\r\n    }\r\n\r\n    if (reasons.length === 0) {\r\n      reasons.push(\"Scenarios are identical or differ only in launch time\")\r\n    }\r\n\r\n    const result: CompareResult = {\r\n      scenarioA: resultA,\r\n      scenarioB: resultB,\r\n      deltaRisk: Math.round(deltaRisk * 1000) / 1000,\r\n      deltaPercent,\r\n      reasons,\r\n    }\r\n\r\n    return NextResponse.json(result)\r\n  } catch (error) {\r\n    console.error(\"Compare error:\", error)\r\n    return NextResponse.json({ error: \"Failed to compare scenarios\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAQ,MAAM,QAAQ,IAAI;QAKhC,IAAI,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,SAAS,EAAE;YACtC,OAAO,+QAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,MAAM,UAAU,IAAA,wIAAa,EAAC,KAAK,SAAS;QAC5C,MAAM,UAAU,IAAA,wIAAa,EAAC,KAAK,SAAS;QAE5C,MAAM,YAAY,QAAQ,WAAW,GAAG,QAAQ,WAAW;QAC3D,MAAM,eACJ,QAAQ,WAAW,GAAG,IAClB,KAAK,KAAK,CAAC,AAAC,YAAY,QAAQ,WAAW,GAAI,OAC/C;QAEN,8BAA8B;QAC9B,MAAM,UAAoB,EAAE;QAE5B,IAAI,KAAK,SAAS,CAAC,gBAAgB,KAAK,KAAK,SAAS,CAAC,gBAAgB,EAAE;YACvE,MAAM,OAAO,KAAK,SAAS,CAAC,gBAAgB,GAAG,KAAK,SAAS,CAAC,gBAAgB;YAC9E,QAAQ,IAAI,CACV,CAAC,SAAS,EAAE,OAAO,IAAI,aAAa,WAAW,IAAI,EAAE,KAAK,GAAG,CAAC,MAAM,IAAI,EAAE,OAAO,IAAI,WAAW,SAAS,gBAAgB,CAAC;QAE9H;QAEA,IAAI,KAAK,SAAS,CAAC,cAAc,KAAK,KAAK,SAAS,CAAC,cAAc,EAAE;YACnE,QAAQ,IAAI,CACV,CAAC,wBAAwB,EAAE,KAAK,SAAS,CAAC,cAAc,CAAC,IAAI,EAAE,KAAK,SAAS,CAAC,cAAc,CAAC,sCAAsC,CAAC;QAExI;QAEA,IAAI,KAAK,SAAS,CAAC,eAAe,KAAK,KAAK,SAAS,CAAC,eAAe,EAAE;YACrE,MAAM,OAAO,KAAK,SAAS,CAAC,eAAe,GAAG,KAAK,SAAS,CAAC,eAAe;YAC5E,QAAQ,IAAI,CACV,CAAC,eAAe,EAAE,OAAO,IAAI,aAAa,WAAW,IAAI,EAAE,KAAK,GAAG,CAAC,MAAM,IAAI,EAAE,OAAO,IAAI,YAAY,UAAU,cAAc,CAAC;QAEpI;QAEA,IAAI,KAAK,SAAS,CAAC,UAAU,CAAC,IAAI,KAAK,KAAK,SAAS,CAAC,UAAU,CAAC,IAAI,EAAE;YACrE,QAAQ,IAAI,CACV,CAAC,+EAA+E,CAAC;QAErF;QAEA,IAAI,QAAQ,MAAM,KAAK,GAAG;YACxB,QAAQ,IAAI,CAAC;QACf;QAEA,MAAM,SAAwB;YAC5B,WAAW;YACX,WAAW;YACX,WAAW,KAAK,KAAK,CAAC,YAAY,QAAQ;YAC1C;YACA;QACF;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF"}}]
}